<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Hotlinks Export</title>
<style>
  body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;background:#f6f6f6;margin:0;padding:20px}
  .container{max-width:700px;margin:auto;background:#fff;border-radius:14px;padding:20px;box-shadow:0 10px 25px rgba(0,0,0,0.08)}
  h1{text-align:center;margin:0 0 8px}
  .sub{text-align:center;color:#666;margin:0 0 18px}
  .person{border:1px solid #ddd;border-radius:12px;padding:14px;margin-bottom:12px}
  .nm{font-size:18px;font-weight:800}
  .ph{color:#666;margin-top:3px;margin-bottom:12px;font-variant-numeric:tabular-nums}
  .buttons{display:flex;gap:12px}
  .button{flex:1;text-align:center;padding:12px;border-radius:10px;border:1px solid #aaa;text-decoration:none;font-weight:700;color:#000;background:#f2f2f2}
  .button:hover{background:#e9e9e9}
  .topbar{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:0 0 14px}
  .navbtn{display:inline-block;padding:10px 12px;border-radius:10px;border:1px solid #ccc;background:#f5f5f5;color:#000;text-decoration:none;font-weight:700}
  .navbtn:hover{background:#eee}
</style>
</head>
<body>
  <div class="container">
    <h1>Contact Hotlinks</h1>
    <div class="sub">Tap a button to call or text</div>

    <div class="topbar">
      <a class="navbtn" href="index.html">‚Üê Back to Builder</a>
      <a class="navbtn" href="#" id="print">Print / Save as PDF</a>
    </div>

    <div id="list"></div>
  </div>

<script>
  const STORAGE = "hotlink_contacts_shared_v1";
  const list = document.getElementById("list");

  function esc(s){
    return String(s??"")
      .replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")
      .replaceAll('"',"&quot;").replaceAll("'","&#039;");
  }
  function fullName(c){
    return [c.first, c.last].map(x => (x||"").trim()).filter(Boolean).join(" ");
  }

  let contacts = [];
  try { contacts = JSON.parse(localStorage.getItem(STORAGE) || "[]"); } catch { contacts = []; }

  if(!contacts.length){
    list.innerHTML = `<div style="color:#666;text-align:center;">No contacts yet. Go back and add some.</div>`;
  } else {
    list.innerHTML = contacts.map(c => `
      <div class="person">
        <div class="nm">${esc(fullName(c) || "Unnamed")}</div>
        <div class="ph">${esc(c.display || "")}</div>
        <div class="buttons">
          <a class="button" href="tel:${esc(c.phone)}">üìû Call</a>
          <a class="button" href="sms:${esc(c.phone)}">üí¨ Text</a>
        </div>
      </div>
    `).join("");
  }

  document.getElementById("print").addEventListener("click", (e) => {
    e.preventDefault();
    window.print();
  });
</script>
</body>
</html>
